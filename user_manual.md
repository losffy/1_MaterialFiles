# 用户手册：MaterialFiles定向存储传输功能

## 简介

MaterialFiles的定向存储传输功能是从SuperUserUtils（苏柚）集成而来的强大文件自动分类和整理工具。它能够自动监控指定目录中的文件变化，并根据文件类型将其分类整理到对应目录，让您的文件世界变得井然有序。

## 主要功能

- **自动监听**：监控指定目录中的文件变化，自动触发分类整理
- **手动整理**：一键整理所有监听目录中的文件
- **灵活配置**：支持自定义监听目录、分类规则和目标路径
- **应用分类**：可按应用来源对文件进行分类
- **多种触发方式**：支持后台监听、应用启动时自动整理和手动触发

## 使用方法

### 1. 访问定向存储传输功能

在MaterialFiles的导航抽屉中点击"定向存储传输"选项，进入设置界面。

### 2. 启用功能

在设置界面顶部，打开"启用定向存储传输"开关，激活该功能。

### 3. 选择监听方式

- **后台监听**：打开"在后台监听文件变化"开关，应用将持续监控文件变化并自动整理
- **启动时整理**：打开"应用启动时自动整理文件"开关，应用每次启动时会自动整理文件
- **手动整理**：点击"立即整理文件"按钮，手动触发一次文件整理

### 4. 查看和编辑配置

- **分类目录**：查看当前的文件分类目标目录，点击"打开"按钮可直接访问该目录
- **监听目录**：查看当前监听的目录数量
- **规则数**：查看当前配置的分类规则数量
- **编辑规则**：点击"编辑规则"按钮，可以自定义监听目录和分类规则

### 5. 管理配置

- **导入配置**：导入已有的配置文件（支持FVV和JSON格式）
- **导出配置**：将当前配置导出为文件，方便备份或分享
- **重置配置**：将所有设置恢复为默认值

## 配置说明

### 监听目录

监听目录定义了应用需要监控哪些文件夹中的文件变化。每个监听目录都有一个分类名称，用于在分类时标识文件来源。

默认监听目录包括：
- 下载：系统下载目录
- QQ：QQ文件接收目录
- 微信：微信下载目录
- 等等...

### 分类规则

分类规则定义了不同类型的文件应该被归类到哪个文件夹。规则基于文件后缀名进行匹配。

默认分类规则包括：
- 压缩包：zip, rar, 7z, tar, gz 等
- 程序：exe, msi, bat, sh, cmd, jar 等
- 视频：mp4, mkv, avi, mov, wmv, flv 等
- 文档：doc, docx, pdf, txt, xls, xlsx, ppt, pptx 等
- 安装包：apk, apks, xapk, ipa 等
- 音频：mp3, wav, flac, aac, ogg 等
- 图片：jpg, jpeg, png, gif, bmp, webp 等
- 代码：java, py, js, html, css, json, xml, kt 等
- 其他：bin, dat 等

### 忽略规则

忽略规则定义了哪些文件应该被排除在自动分类之外。

默认忽略规则包括：
- 临时文件：tmp, cache, log 等
- 备份文件：bak, aria 等

## 注意事项

1. **权限要求**：定向存储传输功能需要存储权限才能正常工作
2. **电池优化**：如果您启用了后台监听，建议将MaterialFiles添加到电池优化白名单中
3. **大量文件**：处理大量文件时可能需要一些时间，请耐心等待
4. **存储空间**：确保目标分类目录有足够的存储空间

## 常见问题

### Q: 为什么有些文件没有被自动分类？
A: 可能的原因包括：
- 文件类型不在任何分类规则中
- 文件在忽略列表中
- 文件正在被其他应用使用，无法移动
- 目标目录没有写入权限

### Q: 如何自定义分类规则？
A: 点击"编辑规则"按钮，进入规则编辑界面，您可以添加、修改或删除分类规则。

### Q: 后台监听会消耗很多电量吗？
A: 我们已经优化了监听机制，正常使用不会显著增加电量消耗。如果您仍然担心，可以关闭后台监听，改用"应用启动时自动整理"或手动整理。

### Q: 如何备份我的配置？
A: 在设置界面中，点击"导出配置"按钮，选择保存位置即可。

## 技术支持

如果您在使用过程中遇到任何问题，或有任何建议和反馈，请通过以下方式联系我们：

- GitHub Issues: https://github.com/zhanghai/MaterialFiles/issues
- 电子邮件: support@example.com

感谢您使用MaterialFiles的定向存储传输功能！
